{"version":3,"file":"index.js","names":["useFormControl","props","context","useFormControlContext","keys","Object","reduce","acc","prop","FormControlContext","React","createContext","undefined","useContext","FormControl","forwardRef","ref","children","className","required","disabled","invalid","readOnly","idProp","id","rest","classes","cx","useId","labelId","errorId","helpTextId","__DEV__","displayName"],"sources":["../../../src/form-control/index.tsx"],"sourcesContent":["import { useId } from \"@reach/auto-id\";\nimport { DefaultProps } from \"@vechaiui/theme\";\nimport { cx, __DEV__ } from \"@vechaiui/utils\";\nimport * as React from \"react\";\n\ninterface UseFormControlProps {\n  /** If `true`, this prop is passed to its children. */\n  required?: boolean;\n  /** If `true`, this prop is passed to its children. */\n  disabled?: boolean;\n  /** If `true`, this prop is passed to its children. */\n  invalid?: boolean;\n  /** If `true`, this prop is passed to its children. */\n  readOnly?: boolean;\n  /** The `id` to use for the form control. */\n  id?: string;\n}\n\ninterface UseFormControlData extends UseFormControlProps {\n  labelId?: string;\n  errorId?: string;\n  helpTextId?: string;\n}\n\ninterface IFormControlProps extends DefaultProps, UseFormControlProps {\n  children?: React.ReactNode;\n}\n\nexport interface FormControlProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    IFormControlProps {}\n\ninterface FormControlContext extends UseFormControlProps {}\n\nexport const useFormControl = (\n  props: UseFormControlProps\n): UseFormControlData => {\n  const context = useFormControlContext();\n  if (!context) {\n    return props;\n  }\n  const keys = Object.keys(context);\n  return keys.reduce((acc, prop) => {\n    /** Giving precedence to `props` over `context` */\n    acc[prop] = props[prop];\n\n    if (context) {\n      if (props[prop] == null) {\n        acc[prop] = context[prop];\n      }\n    }\n\n    return acc;\n  }, {});\n};\n\nconst FormControlContext = React.createContext<FormControlContext | undefined>(\n  undefined\n);\n\nconst useFormControlContext = () => React.useContext(FormControlContext);\n\nexport const FormControl = React.forwardRef<HTMLDivElement, FormControlProps>(\n  (props, ref) => {\n    const {\n      children,\n      className,\n      required,\n      disabled,\n      invalid,\n      readOnly,\n      id: idProp,\n      ...rest\n    } = props;\n    const classes = cx(\"form-control\", className);\n\n    const id = idProp || `field-${useId()}`;\n\n    const labelId = `${id}-label`;\n    const errorId = `${id}-error`;\n    const helpTextId = `${id}-helptext`;\n\n    const context = {\n      required,\n      disabled,\n      invalid,\n      readOnly,\n      id,\n      labelId,\n      errorId,\n      helpTextId,\n    };\n\n    return (\n      <FormControlContext.Provider value={context}>\n        <div role=\"group\" ref={ref} className={classes} {...rest}>\n          {children}\n        </div>\n      </FormControlContext.Provider>\n    );\n  }\n);\n\nif (__DEV__) {\n  FormControl.displayName = \"FormGroup\";\n}\n"],"mappings":";;;;AAAA;AAEA;AACA;AAA+B;AAAA;AAAA;AAAA;AAAA;AA+BxB,IAAMA,cAAc,GAAG,SAAjBA,cAAc,CACzBC,KAA0B,EACH;EACvB,IAAMC,OAAO,GAAGC,qBAAqB,EAAE;EACvC,IAAI,CAACD,OAAO,EAAE;IACZ,OAAOD,KAAK;EACd;EACA,IAAMG,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACF,OAAO,CAAC;EACjC,OAAOE,IAAI,CAACE,MAAM,CAAC,UAACC,GAAG,EAAEC,IAAI,EAAK;IAChC;IACAD,GAAG,CAACC,IAAI,CAAC,GAAGP,KAAK,CAACO,IAAI,CAAC;IAEvB,IAAIN,OAAO,EAAE;MACX,IAAID,KAAK,CAACO,IAAI,CAAC,IAAI,IAAI,EAAE;QACvBD,GAAG,CAACC,IAAI,CAAC,GAAGN,OAAO,CAACM,IAAI,CAAC;MAC3B;IACF;IAEA,OAAOD,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AACR,CAAC;AAAC;AAEF,IAAME,kBAAkB,gBAAGC,KAAK,CAACC,aAAa,CAC5CC,SAAS,CACV;AAED,IAAMT,qBAAqB,GAAG,SAAxBA,qBAAqB;EAAA,OAASO,KAAK,CAACG,UAAU,CAACJ,kBAAkB,CAAC;AAAA;AAEjE,IAAMK,WAAW,gBAAGJ,KAAK,CAACK,UAAU,CACzC,UAACd,KAAK,EAAEe,GAAG,EAAK;EACd,IACEC,QAAQ,GAQNhB,KAAK,CARPgB,QAAQ;IACRC,SAAS,GAOPjB,KAAK,CAPPiB,SAAS;IACTC,QAAQ,GAMNlB,KAAK,CANPkB,QAAQ;IACRC,QAAQ,GAKNnB,KAAK,CALPmB,QAAQ;IACRC,OAAO,GAILpB,KAAK,CAJPoB,OAAO;IACPC,QAAQ,GAGNrB,KAAK,CAHPqB,QAAQ;IACJC,MAAM,GAERtB,KAAK,CAFPuB,EAAE;IACCC,IAAI,iCACLxB,KAAK;EACT,IAAMyB,OAAO,GAAG,IAAAC,SAAE,EAAC,cAAc,EAAET,SAAS,CAAC;EAE7C,IAAMM,EAAE,GAAGD,MAAM,eAAa,IAAAK,aAAK,GAAI;EAEvC,IAAMC,OAAO,GAAML,EAAE,WAAQ;EAC7B,IAAMM,OAAO,GAAMN,EAAE,WAAQ;EAC7B,IAAMO,UAAU,GAAMP,EAAE,cAAW;EAEnC,IAAMtB,OAAO,GAAG;IACdiB,QAAQ,EAARA,QAAQ;IACRC,QAAQ,EAARA,QAAQ;IACRC,OAAO,EAAPA,OAAO;IACPC,QAAQ,EAARA,QAAQ;IACRE,EAAE,EAAFA,EAAE;IACFK,OAAO,EAAPA,OAAO;IACPC,OAAO,EAAPA,OAAO;IACPC,UAAU,EAAVA;EACF,CAAC;EAED,oBACE,oBAAC,kBAAkB,CAAC,QAAQ;IAAC,KAAK,EAAE7B;EAAQ,gBAC1C;IAAK,IAAI,EAAC,OAAO;IAAC,GAAG,EAAEc,GAAI;IAAC,SAAS,EAAEU;EAAQ,GAAKD,IAAI,GACrDR,QAAQ,CACL,CACsB;AAElC,CAAC,CACF;AAAC;AAEF,IAAIe,cAAO,EAAE;EACXlB,WAAW,CAACmB,WAAW,GAAG,WAAW;AACvC"}