{"version":3,"file":"index.js","names":["useId","cx","__DEV__","React","useFormControl","props","context","useFormControlContext","keys","Object","reduce","acc","prop","FormControlContext","createContext","undefined","useContext","FormControl","forwardRef","ref","children","className","required","disabled","invalid","readOnly","id","idProp","rest","classes","labelId","errorId","helpTextId","displayName"],"sources":["../../../src/form-control/index.tsx"],"sourcesContent":["import { useId } from \"@reach/auto-id\";\nimport { DefaultProps } from \"@vechaiui/theme\";\nimport { cx, __DEV__ } from \"@vechaiui/utils\";\nimport * as React from \"react\";\n\ninterface UseFormControlProps {\n  /** If `true`, this prop is passed to its children. */\n  required?: boolean;\n  /** If `true`, this prop is passed to its children. */\n  disabled?: boolean;\n  /** If `true`, this prop is passed to its children. */\n  invalid?: boolean;\n  /** If `true`, this prop is passed to its children. */\n  readOnly?: boolean;\n  /** The `id` to use for the form control. */\n  id?: string;\n}\n\ninterface UseFormControlData extends UseFormControlProps {\n  labelId?: string;\n  errorId?: string;\n  helpTextId?: string;\n}\n\ninterface IFormControlProps extends DefaultProps, UseFormControlProps {\n  children?: React.ReactNode;\n}\n\nexport interface FormControlProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    IFormControlProps {}\n\ninterface FormControlContext extends UseFormControlProps {}\n\nexport const useFormControl = (\n  props: UseFormControlProps\n): UseFormControlData => {\n  const context = useFormControlContext();\n  if (!context) {\n    return props;\n  }\n  const keys = Object.keys(context);\n  return keys.reduce((acc, prop) => {\n    /** Giving precedence to `props` over `context` */\n    acc[prop] = props[prop];\n\n    if (context) {\n      if (props[prop] == null) {\n        acc[prop] = context[prop];\n      }\n    }\n\n    return acc;\n  }, {});\n};\n\nconst FormControlContext = React.createContext<FormControlContext | undefined>(\n  undefined\n);\n\nconst useFormControlContext = () => React.useContext(FormControlContext);\n\nexport const FormControl = React.forwardRef<HTMLDivElement, FormControlProps>(\n  (props, ref) => {\n    const {\n      children,\n      className,\n      required,\n      disabled,\n      invalid,\n      readOnly,\n      id: idProp,\n      ...rest\n    } = props;\n    const classes = cx(\"form-control\", className);\n\n    const id = idProp || `field-${useId()}`;\n\n    const labelId = `${id}-label`;\n    const errorId = `${id}-error`;\n    const helpTextId = `${id}-helptext`;\n\n    const context = {\n      required,\n      disabled,\n      invalid,\n      readOnly,\n      id,\n      labelId,\n      errorId,\n      helpTextId,\n    };\n\n    return (\n      <FormControlContext.Provider value={context}>\n        <div role=\"group\" ref={ref} className={classes} {...rest}>\n          {children}\n        </div>\n      </FormControlContext.Provider>\n    );\n  }\n);\n\nif (__DEV__) {\n  FormControl.displayName = \"FormGroup\";\n}\n"],"mappings":";;;AAAA,SAASA,KAAK,QAAQ,gBAAgB;AAEtC,SAASC,EAAE,EAAEC,OAAO,QAAQ,iBAAiB;AAC7C,OAAO,KAAKC,KAAK,MAAM,OAAO;AA+B9B,OAAO,IAAMC,cAAc,GACzBC,KAA0B,IACH;EACvB,IAAMC,OAAO,GAAGC,qBAAqB,EAAE;EACvC,IAAI,CAACD,OAAO,EAAE;IACZ,OAAOD,KAAK;EACd;EACA,IAAMG,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACF,OAAO,CAAC;EACjC,OAAOE,IAAI,CAACE,MAAM,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAK;IAChC;IACAD,GAAG,CAACC,IAAI,CAAC,GAAGP,KAAK,CAACO,IAAI,CAAC;IAEvB,IAAIN,OAAO,EAAE;MACX,IAAID,KAAK,CAACO,IAAI,CAAC,IAAI,IAAI,EAAE;QACvBD,GAAG,CAACC,IAAI,CAAC,GAAGN,OAAO,CAACM,IAAI,CAAC;MAC3B;IACF;IAEA,OAAOD,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AACR,CAAC;AAED,IAAME,kBAAkB,gBAAGV,KAAK,CAACW,aAAa,CAC5CC,SAAS,CACV;AAED,IAAMR,qBAAqB,GAAG,MAAMJ,KAAK,CAACa,UAAU,CAACH,kBAAkB,CAAC;AAExE,OAAO,IAAMI,WAAW,gBAAGd,KAAK,CAACe,UAAU,CACzC,CAACb,KAAK,EAAEc,GAAG,KAAK;EACd,IAAM;MACJC,QAAQ;MACRC,SAAS;MACTC,QAAQ;MACRC,QAAQ;MACRC,OAAO;MACPC,QAAQ;MACRC,EAAE,EAAEC;IAEN,CAAC,GAAGtB,KAAK;IADJuB,IAAI,iCACLvB,KAAK;EACT,IAAMwB,OAAO,GAAG5B,EAAE,CAAC,cAAc,EAAEoB,SAAS,CAAC;EAE7C,IAAMK,EAAE,GAAGC,MAAM,eAAa3B,KAAK,EAAI;EAEvC,IAAM8B,OAAO,GAAMJ,EAAE,WAAQ;EAC7B,IAAMK,OAAO,GAAML,EAAE,WAAQ;EAC7B,IAAMM,UAAU,GAAMN,EAAE,cAAW;EAEnC,IAAMpB,OAAO,GAAG;IACdgB,QAAQ;IACRC,QAAQ;IACRC,OAAO;IACPC,QAAQ;IACRC,EAAE;IACFI,OAAO;IACPC,OAAO;IACPC;EACF,CAAC;EAED,oBACE,oBAAC,kBAAkB,CAAC,QAAQ;IAAC,KAAK,EAAE1B;EAAQ,gBAC1C;IAAK,IAAI,EAAC,OAAO;IAAC,GAAG,EAAEa,GAAI;IAAC,SAAS,EAAEU;EAAQ,GAAKD,IAAI,GACrDR,QAAQ,CACL,CACsB;AAElC,CAAC,CACF;AAED,IAAIlB,OAAO,EAAE;EACXe,WAAW,CAACgB,WAAW,GAAG,WAAW;AACvC"}