{"version":3,"file":"color.js","names":["hsl2rgb","h","s","l","c","Math","abs","x","m","r","g","b","round","hwb2rgb","w","rgb","i","toRGBA","color","test","colorTuple","colorString","get","hsl","startsWith","hwb","value","toRGB","slice","toColor","colorStr","rgba","join","opacity","toString"],"sources":["../../src/color.ts"],"sourcesContent":["import colorString from \"color-string\";\nimport type { Color } from \"color-string\";\n\nexport function hsl2rgb(\n  h: number,\n  s: number,\n  l: number\n): [number, number, number] {\n  (s = s / 100), (l = l / 100);\n  if (h >= 360) h %= 360;\n\n  const c = (1 - Math.abs(2 * l - 1)) * s;\n  const x = c * (1 - Math.abs(((h / 60) % 2) - 1));\n  const m = l - c / 2;\n  let r = 0;\n  let g = 0;\n  let b = 0;\n\n  if (0 <= h && h < 60) {\n    r = c;\n    g = x;\n    b = 0;\n  } else if (60 <= h && h < 120) {\n    r = x;\n    g = c;\n    b = 0;\n  } else if (120 <= h && h < 180) {\n    r = 0;\n    g = c;\n    b = x;\n  } else if (180 <= h && h < 240) {\n    r = 0;\n    g = x;\n    b = c;\n  } else if (240 <= h && h < 300) {\n    r = x;\n    g = 0;\n    b = c;\n  } else if (300 <= h && h < 360) {\n    r = c;\n    g = 0;\n    b = x;\n  }\n  // having obtained RGB, convert channels to hex\n  r = Math.round((r + m) * 255);\n  g = Math.round((g + m) * 255);\n  b = Math.round((b + m) * 255);\n  return [r, g, b];\n}\n\nexport function hwb2rgb(\n  h: number,\n  w: number,\n  b: number\n): [number, number, number] {\n  const rgb = hsl2rgb(h, 100, 50);\n\n  for (let i = 0; i < 3; ++i) {\n    let c = rgb[i] / 255;\n\n    c *= 1 - w / 100 - b / 100;\n    c += w / 100;\n\n    rgb[i] = Math.round(c * 255);\n  }\n\n  return rgb;\n}\n\nexport function toRGBA(color: string): Color | undefined {\n  if (/^hsla?/.test(color)) {\n    const colorTuple = colorString.get.hsl(color);\n    if (!colorTuple) return;\n    return [\n      ...hsl2rgb(colorTuple[0], colorTuple[1], colorTuple[2]),\n      colorTuple[3],\n    ];\n  } else if (/^rgba?/.test(color)) {\n    const colorTuple = colorString.get.rgb(color);\n    if (!colorTuple) return;\n    return colorTuple;\n  } else if (color.startsWith(\"hwb\")) {\n    const colorTuple = colorString.get.hwb(color);\n    if (!colorTuple) return;\n    return [\n      ...hwb2rgb(colorTuple[0], colorTuple[1], colorTuple[2]),\n      colorTuple[3],\n    ];\n  }\n  return colorString.get(color)?.value;\n}\n\nexport function toRGB(color: string): number[] | undefined {\n  return toRGBA(color)?.slice(0, 3);\n}\n\nexport function toColor(colorStr: string): { color: string; opacity: string } {\n  const rgba = toRGBA(colorStr);\n  const color = rgba ? rgba.slice(0, 3).join(\", \") : colorStr;\n  const opacity = rgba ? rgba[3].toString() : \"1\";\n\n  return {\n    color,\n    opacity,\n  };\n}\n"],"mappings":"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"}