{"version":3,"file":"walk-object.js","names":["isArray","isObject","walkObject","target","predicate","inner","value","path","map","item","index","String","Object","fromEntries","entries","key","child"],"sources":["../../src/walk-object.ts"],"sourcesContent":["import { isArray, isObject } from \"./\";\n\nexport type WalkObjectPredicate<Leaf = unknown> = (\n  value: unknown,\n  path: string[]\n) => Leaf;\n\nexport type MappedLeavesObject<Obj, LeafType> = {\n  [Prop in keyof Obj]: Obj[Prop] extends Array<any>\n    ? MappedLeavesObject<Obj[Prop][number], LeafType>[]\n    : Obj[Prop] extends object\n    ? MappedLeavesObject<Obj[Prop], LeafType>\n    : LeafType;\n};\n\nexport function walkObject<Target, LeafType>(\n  target: Target,\n  predicate: WalkObjectPredicate<LeafType>\n): MappedLeavesObject<Target, ReturnType<WalkObjectPredicate<LeafType>>> {\n  function inner(value: unknown, path: string[] = []): any {\n    if (isArray(value)) {\n      return value.map((item, index) => inner(item, [...path, String(index)]));\n    }\n\n    if (isObject(value)) {\n      return Object.fromEntries(\n        Object.entries(value).map(([key, child]) => [\n          key,\n          inner(child, [...path, key]),\n        ])\n      );\n    }\n\n    return predicate(value, path);\n  }\n\n  return inner(target);\n}\n"],"mappings":"AAAA,SAASA,OAAO,EAAEC,QAAQ,QAAQ,IAAI;AAetC,OAAO,SAASC,UAAU,CACxBC,MAAc,EACdC,SAAwC,EAC+B;EACvE,SAASC,KAAK,CAACC,KAAc,EAAEC,IAAc,EAAY;IAAA,IAA1BA,IAAc;MAAdA,IAAc,GAAG,EAAE;IAAA;IAChD,IAAIP,OAAO,CAACM,KAAK,CAAC,EAAE;MAClB,OAAOA,KAAK,CAACE,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAKL,KAAK,CAACI,IAAI,EAAE,CAAC,GAAGF,IAAI,EAAEI,MAAM,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC;IAC1E;IAEA,IAAIT,QAAQ,CAACK,KAAK,CAAC,EAAE;MACnB,OAAOM,MAAM,CAACC,WAAW,CACvBD,MAAM,CAACE,OAAO,CAACR,KAAK,CAAC,CAACE,GAAG,CAAC;QAAA,IAAC,CAACO,GAAG,EAAEC,KAAK,CAAC;QAAA,OAAK,CAC1CD,GAAG,EACHV,KAAK,CAACW,KAAK,EAAE,CAAC,GAAGT,IAAI,EAAEQ,GAAG,CAAC,CAAC,CAC7B;MAAA,EAAC,CACH;IACH;IAEA,OAAOX,SAAS,CAACE,KAAK,EAAEC,IAAI,CAAC;EAC/B;EAEA,OAAOF,KAAK,CAACF,MAAM,CAAC;AACtB"}