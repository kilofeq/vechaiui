{"version":3,"file":"Message.js","names":["getStyle","position","style","display","flexDirection","alignItems","includes","Message","id","message","onRequestRemove","requestClose","duration","container","React","useRef","useState","timeout","setTimeout","localShow","setLocalShow","isFromTop","useTimeout","close","animation","config","mass","tension","friction","from","opacity","height","transform","enter","next","current","getBoundingClientRect","leave","onRest","transition","useTransition","useMemo","onMouseEnter","onMouseLeave","useEffect","renderMessage","isValidElement","onClose","props","item","pointerEvents"],"sources":["../../src/Message.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport ReachAlert from \"@reach/alert\";\nimport Alert from \"./Alert\";\nimport { useTimeout } from \"./useTimeout\";\nimport POSITIONS from \"./Positions\";\n\ninterface MessageCallback {\n  id: string;\n  onClose: () => void;\n}\n\nexport type MessageType = \"default\" | \"success\" | \"error\";\n\nexport type PositionsType = keyof typeof POSITIONS;\n\nconst getStyle = (position: PositionsType) => {\n  let style = {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  } as React.CSSProperties;\n\n  if (position.includes(\"right\")) {\n    style.alignItems = \"flex-end\";\n  } else if (position.includes(\"left\")) {\n    style.alignItems = \"flex-start\";\n  }\n\n  return style;\n};\n\nexport type MessageProp =\n  | React.ReactNode\n  | ((callback: MessageCallback) => React.ReactNode)\n  | string;\n\nexport interface MessageOptions {\n  id: string;\n  duration: number | null;\n  type: MessageType;\n  onRequestRemove: () => void;\n  onRequestClose: () => void;\n  showing: boolean;\n  position: PositionsType;\n}\n\ninterface Props extends MessageOptions {\n  message: MessageProp;\n  zIndex?: number;\n  requestClose?: boolean;\n  position: PositionsType;\n}\n\nexport const Message = ({\n  id,\n  message,\n  position,\n  onRequestRemove,\n  requestClose = false,\n  duration = 30000,\n}: Props) => {\n  const container = React.useRef<HTMLDivElement | null>(null);\n  const [timeout, setTimeout] = React.useState(duration);\n  const [localShow, setLocalShow] = React.useState(true);\n\n  const isFromTop =\n    position === \"top-left\" || position === \"top-right\" || position === \"top\";\n\n  useTimeout(close, timeout);\n\n  const animation = {\n    config: { mass: 1, tension: 185, friction: 26 },\n    from: {\n      opacity: 1,\n      height: 0,\n      transform: `translateY(${isFromTop ? \"-100%\" : 0}) scale(1)`,\n    },\n    enter: () => (next: any) =>\n      next({\n        opacity: 1,\n        height: container.current!.getBoundingClientRect().height,\n        transform: `translateY(0) scale(1)`,\n      }),\n    leave: {\n      opacity: 0,\n      height: 0,\n      transform: `translateY(0 scale(0.9)`,\n    },\n    onRest,\n  } as any;\n\n  const transition = useTransition(localShow, animation);\n  const style = React.useMemo(() => getStyle(position), [position]);\n\n  function onMouseEnter() {\n    setTimeout(null);\n  }\n\n  function onMouseLeave() {\n    setTimeout(duration);\n  }\n\n  function onRest() {\n    if (!localShow) {\n      onRequestRemove();\n    }\n  }\n\n  function close() {\n    setLocalShow(false);\n  }\n\n  React.useEffect(() => {\n    if (requestClose) {\n      setLocalShow(false);\n    }\n  }, [requestClose]);\n\n  function renderMessage() {\n    if (typeof message === \"string\" || React.isValidElement(message)) {\n      return <Alert id={id} title={message} onClose={close} />;\n    }\n\n    if (typeof message === \"function\") {\n      return message({\n        id,\n        onClose: close,\n      });\n    }\n\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      {transition(\n        (props, item) =>\n          item && (\n            <animated.div\n              className=\"Toaster__message\"\n              onMouseEnter={onMouseEnter}\n              onMouseLeave={onMouseLeave}\n              style={{\n                opacity: props.opacity,\n                height: props.height,\n                ...style,\n              }}\n            >\n              <animated.div\n                style={{\n                  transform: props.transform,\n                  pointerEvents: \"auto\",\n                }}\n                ref={container}\n                className=\"Toaster__message-wrapper\"\n              >\n                <ReachAlert>{renderMessage()}</ReachAlert>\n              </animated.div>\n            </animated.div>\n          )\n      )}\n    </React.Fragment>\n  );\n};\n"],"mappings":"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"}