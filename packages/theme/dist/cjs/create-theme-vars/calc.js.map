{"version":3,"file":"calc.js","names":["resolveReference","operand","isObject","reference","String","toExpression","operator","operands","map","join","replace","add","subtract","multiply","divide","negate","x","value","Number","isNaN","parseFloat","startsWith","slice","calc","Object","assign","toString"],"sources":["../../../src/create-theme-vars/calc.ts"],"sourcesContent":["/**\n * Thank you @markdalgleish for this piece of art!\n */\nimport { isObject } from \"@vechaiui/utils\";\n\nexport type Operand = string | number | { reference: string };\ntype Operator = \"+\" | \"-\" | \"*\" | \"/\";\n\nfunction resolveReference(operand: Operand): string {\n  if (isObject(operand) && operand.reference) {\n    return operand.reference;\n  }\n  return String(operand);\n}\n\nconst toExpression = (operator: Operator, ...operands: Array<Operand>) =>\n  operands.map(resolveReference).join(` ${operator} `).replace(/calc/g, \"\");\n\nconst add = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"+\", ...operands)})`;\n\nconst subtract = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"-\", ...operands)})`;\n\nconst multiply = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"*\", ...operands)})`;\n\nconst divide = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"/\", ...operands)})`;\n\nconst negate = (x: Operand) => {\n  const value = resolveReference(x);\n\n  if (value != null && !Number.isNaN(parseFloat(value))) {\n    return String(value).startsWith(\"-\") ? String(value).slice(1) : `-${value}`;\n  }\n\n  return multiply(value, -1);\n};\n\ninterface CalcChain {\n  add: (...operands: Array<Operand>) => CalcChain;\n  subtract: (...operands: Array<Operand>) => CalcChain;\n  multiply: (...operands: Array<Operand>) => CalcChain;\n  divide: (...operands: Array<Operand>) => CalcChain;\n  negate: () => CalcChain;\n  toString: () => string;\n}\n\nexport const calc = Object.assign(\n  (x: Operand): CalcChain => ({\n    add: (...operands) => calc(add(x, ...operands)),\n    subtract: (...operands) => calc(subtract(x, ...operands)),\n    multiply: (...operands) => calc(multiply(x, ...operands)),\n    divide: (...operands) => calc(divide(x, ...operands)),\n    negate: () => calc(negate(x)),\n    toString: () => x.toString(),\n  }),\n  {\n    add,\n    subtract,\n    multiply,\n    divide,\n    negate,\n  }\n);\n"],"mappings":"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"}