{"version":3,"file":"create-theme-vars.js","names":["createThemeVars","target","options","context","cssMap","cssVars","walkObject","value","path","firstKey","handler","tokenHandlerMap","defaultHandler","Object","assign","keys","lookupKey","join","varKey","cssVar","undefined","cssVarPrefix","variable","reference","varRef"],"sources":["../../../src/create-theme-vars/create-theme-vars.ts"],"sourcesContent":["import { Dict, walkObject } from \"@vechaiui/utils\";\n\nimport { ThemeScale } from \"./theme-tokens\";\nimport { cssVar } from \"./css-var\";\n\nexport interface CreateThemeVarsOptions {\n  cssVarPrefix?: string;\n}\n\nexport interface ThemeVars {\n  cssVars: Dict;\n  cssMap: Dict;\n}\n\nexport function createThemeVars(target: Dict, options: CreateThemeVarsOptions) {\n  const context: ThemeVars = {\n    cssMap: {},\n    cssVars: {},\n  };\n\n  walkObject(target, (value, path) => {\n    // firstKey will be e.g. \"space\"\n    const [firstKey] = path;\n\n    const handler = tokenHandlerMap[firstKey] ?? tokenHandlerMap.defaultHandler;\n\n    const { cssVars, cssMap } = handler(path, value, options);\n    Object.assign(context.cssVars, cssVars);\n    Object.assign(context.cssMap, cssMap);\n  });\n\n  return context;\n}\n\ntype TokenHandler = (\n  keys: string[],\n  value: unknown | { reference: string },\n  options: CreateThemeVarsOptions\n) => ThemeVars;\n\n/**\n * Define transformation handlers for ThemeScale\n */\nconst tokenHandlerMap: Partial<Record<ThemeScale, TokenHandler>> & {\n  defaultHandler: TokenHandler;\n} = {\n  defaultHandler: (keys, value, options) => {\n    const lookupKey = keys.join(\".\");\n    const varKey = keys.join(\"-\");\n\n    const { variable, reference } = cssVar(\n      varKey,\n      undefined,\n      options.cssVarPrefix\n    );\n\n    return {\n      cssVars: {\n        [variable]: value,\n      },\n      cssMap: {\n        [lookupKey]: {\n          value,\n          var: variable,\n          varRef: reference,\n        },\n      },\n    };\n  },\n};\n"],"mappings":";;;;AAAA;AAGA;AAWO,SAASA,eAAe,CAACC,MAAY,EAAEC,OAA+B,EAAE;EAC7E,IAAMC,OAAkB,GAAG;IACzBC,MAAM,EAAE,CAAC,CAAC;IACVC,OAAO,EAAE,CAAC;EACZ,CAAC;EAED,IAAAC,iBAAU,EAACL,MAAM,EAAE,UAACM,KAAK,EAAEC,IAAI,EAAK;IAAA;IAClC;IACA,IAAOC,QAAQ,GAAID,IAAI;IAEvB,IAAME,OAAO,4BAAGC,eAAe,CAACF,QAAQ,CAAC,oCAAIE,eAAe,CAACC,cAAc;IAE3E,eAA4BF,OAAO,CAACF,IAAI,EAAED,KAAK,EAAEL,OAAO,CAAC;MAAjDG,OAAO,YAAPA,OAAO;MAAED,MAAM,YAANA,MAAM;IACvBS,MAAM,CAACC,MAAM,CAACX,OAAO,CAACE,OAAO,EAAEA,OAAO,CAAC;IACvCQ,MAAM,CAACC,MAAM,CAACX,OAAO,CAACC,MAAM,EAAEA,MAAM,CAAC;EACvC,CAAC,CAAC;EAEF,OAAOD,OAAO;AAChB;AAQA;AACA;AACA;AACA,IAAMQ,eAEL,GAAG;EACFC,cAAc,EAAE,wBAACG,IAAI,EAAER,KAAK,EAAEL,OAAO,EAAK;IAAA;IACxC,IAAMc,SAAS,GAAGD,IAAI,CAACE,IAAI,CAAC,GAAG,CAAC;IAChC,IAAMC,MAAM,GAAGH,IAAI,CAACE,IAAI,CAAC,GAAG,CAAC;IAE7B,cAAgC,IAAAE,eAAM,EACpCD,MAAM,EACNE,SAAS,EACTlB,OAAO,CAACmB,YAAY,CACrB;MAJOC,QAAQ,WAARA,QAAQ;MAAEC,SAAS,WAATA,SAAS;IAM3B,OAAO;MACLlB,OAAO,2BACJiB,QAAQ,IAAGf,KAAK,WAClB;MACDH,MAAM,yBACHY,SAAS,IAAG;QACXT,KAAK,EAALA,KAAK;QACL,OAAKe,QAAQ;QACbE,MAAM,EAAED;MACV,CAAC;IAEL,CAAC;EACH;AACF,CAAC"}