{"version":3,"file":"calc.js","names":["isObject","resolveReference","operand","reference","String","toExpression","operator","operands","map","join","replace","add","subtract","multiply","divide","negate","x","value","Number","isNaN","parseFloat","startsWith","slice","calc","Object","assign","toString"],"sources":["../../../src/create-theme-vars/calc.ts"],"sourcesContent":["/**\n * Thank you @markdalgleish for this piece of art!\n */\nimport { isObject } from \"@vechaiui/utils\";\n\nexport type Operand = string | number | { reference: string };\ntype Operator = \"+\" | \"-\" | \"*\" | \"/\";\n\nfunction resolveReference(operand: Operand): string {\n  if (isObject(operand) && operand.reference) {\n    return operand.reference;\n  }\n  return String(operand);\n}\n\nconst toExpression = (operator: Operator, ...operands: Array<Operand>) =>\n  operands.map(resolveReference).join(` ${operator} `).replace(/calc/g, \"\");\n\nconst add = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"+\", ...operands)})`;\n\nconst subtract = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"-\", ...operands)})`;\n\nconst multiply = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"*\", ...operands)})`;\n\nconst divide = (...operands: Array<Operand>) =>\n  `calc(${toExpression(\"/\", ...operands)})`;\n\nconst negate = (x: Operand) => {\n  const value = resolveReference(x);\n\n  if (value != null && !Number.isNaN(parseFloat(value))) {\n    return String(value).startsWith(\"-\") ? String(value).slice(1) : `-${value}`;\n  }\n\n  return multiply(value, -1);\n};\n\ninterface CalcChain {\n  add: (...operands: Array<Operand>) => CalcChain;\n  subtract: (...operands: Array<Operand>) => CalcChain;\n  multiply: (...operands: Array<Operand>) => CalcChain;\n  divide: (...operands: Array<Operand>) => CalcChain;\n  negate: () => CalcChain;\n  toString: () => string;\n}\n\nexport const calc = Object.assign(\n  (x: Operand): CalcChain => ({\n    add: (...operands) => calc(add(x, ...operands)),\n    subtract: (...operands) => calc(subtract(x, ...operands)),\n    multiply: (...operands) => calc(multiply(x, ...operands)),\n    divide: (...operands) => calc(divide(x, ...operands)),\n    negate: () => calc(negate(x)),\n    toString: () => x.toString(),\n  }),\n  {\n    add,\n    subtract,\n    multiply,\n    divide,\n    negate,\n  }\n);\n"],"mappings":"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"}