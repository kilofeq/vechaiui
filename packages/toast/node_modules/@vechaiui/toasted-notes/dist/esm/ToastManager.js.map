{"version":3,"sources":["../../src/ToastManager.tsx"],"names":["React","Message","defaultState","top","bottom","ToastManager","Component","constructor","props","state","notify","message","options","toast","createToastState","position","isTop","includes","setState","prev","id","closeAll","Object","keys","forEach","pos","p","closeToast","idCounter","hasOwnProperty","showing","duration","onRequestRemove","removeToast","String","type","map","requestClose","filter","getStyle","style","maxWidth","zIndex","pointerEvents","margin","textAlign","right","left","render","toasts"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport {\n  Message,\n  PositionsType,\n  MessageType,\n  MessageOptions,\n  MessageProp\n} from \"./Message\";\n\ninterface Props {\n  notify: (fn: Function, closeAll: Function, close: Function) => void;\n}\n\nexport interface MessageOptionalOptions {\n  type?: MessageType;\n  duration?: number | null;\n  position?: PositionsType;\n}\n\ninterface ToastArgs extends MessageOptions {\n  message: MessageProp;\n}\n\ntype State = {\n  top: Array<ToastArgs>;\n  \"top-left\": Array<ToastArgs>;\n  \"top-right\": Array<ToastArgs>;\n  \"bottom-left\": Array<ToastArgs>;\n  bottom: Array<ToastArgs>;\n  \"bottom-right\": Array<ToastArgs>;\n};\n\nconst defaultState: State = {\n  top: [],\n  \"top-left\": [],\n  \"top-right\": [],\n  \"bottom-left\": [],\n  bottom: [],\n  \"bottom-right\": []\n};\n\ntype Keys = keyof State;\n\nexport default class ToastManager extends React.Component<Props, State> {\n  static idCounter = 0;\n\n  state: State = defaultState;\n\n  constructor(props: Props) {\n    super(props);\n    props.notify(this.notify, this.closeAll, this.closeToast);\n  }\n\n  notify = (message: MessageProp, options: MessageOptionalOptions) => {\n    const toast = this.createToastState(message, options);\n    const { position } = toast;\n\n    // prepend the toast for toasts positioned at the top of\n    // the screen, otherwise append it.\n    const isTop = position.includes(\"top\");\n\n    this.setState(prev => {\n      return {\n        ...prev,\n        [position]: isTop\n          ? [toast, ...prev[position]]\n          : [...prev[position], toast]\n      };\n    });\n    return { id: toast.id, position: toast.position };\n  };\n\n  closeAll = () => {\n    Object.keys(this.state).forEach(pos => {\n      const p = pos as keyof State;\n      const position = this.state[p];\n      position.forEach((toast: any) => {\n        this.closeToast(toast.id, p);\n      });\n    });\n  };\n\n  createToastState = (\n    message: MessageProp,\n    options: MessageOptionalOptions\n  ) => {\n    const id = ++ToastManager.idCounter;\n\n    // a bit messy, but object.position returns a number because\n    // it's a method argument.\n    const position =\n      options.hasOwnProperty(\"position\") && typeof options.position === \"string\"\n        ? options.position\n        : \"top\";\n\n    return {\n      id,\n      message,\n      position,\n      showing: true,\n      duration:\n        typeof options.duration === \"undefined\" ? 5000 : options.duration,\n      onRequestRemove: () => this.removeToast(String(id), position),\n      type: options.type\n    };\n  };\n\n  closeToast = (id: string, position: PositionsType) => {\n    this.setState(prev => {\n      return {\n        ...prev,\n        [position]: prev[position].map(toast => {\n          if (toast.id !== id) return toast;\n          return {\n            ...toast,\n            requestClose: true\n          };\n        })\n      };\n    });\n  };\n\n  // actually fully remove the toast\n  removeToast = (id: string, position: PositionsType) => {\n    this.setState(prev => {\n      return {\n        ...prev,\n        [position]: prev[position].filter(toast => toast.id !== id)\n      };\n    });\n  };\n\n  getStyle = (position: PositionsType) => {\n    let style: React.CSSProperties = {\n      maxWidth: \"560px\",\n      position: \"fixed\",\n      zIndex: 5500,\n      pointerEvents: \"none\"\n    };\n\n    if (position === \"top\" || position === \"bottom\") {\n      style.margin = \"0 auto\";\n      style.textAlign = \"center\";\n    }\n\n    if (position.includes(\"top\")) {\n      style.top = 0;\n    }\n\n    if (position.includes(\"bottom\")) {\n      style.bottom = 0;\n    }\n\n    if (!position.includes(\"left\")) {\n      style.right = 0;\n    }\n\n    if (!position.includes(\"right\")) {\n      style.left = 0;\n    }\n\n    return style;\n  };\n\n  render() {\n    return Object.keys(this.state).map(position => {\n      const pos = position as keyof State;\n      const toasts = this.state[pos];\n      return (\n        <span\n          key={position}\n          className={\"Toaster__manager-\" + pos}\n          style={this.getStyle(pos)}\n        >\n          {toasts.map((toast: ToastArgs) => {\n            return <Message {...toast} position={pos} key={toast.id} />;\n          })}\n        </span>\n      );\n    });\n  }\n}\n"],"file":"ToastManager.js"}