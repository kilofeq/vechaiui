{"version":3,"sources":["../../src/Message.tsx"],"names":["getStyle","position","style","display","flexDirection","alignItems","includes","Message","id","message","onRequestRemove","requestClose","duration","container","React","useRef","useState","timeout","setTimeout","localShow","setLocalShow","isFromTop","close","animation","config","mass","tension","friction","from","opacity","height","transform","enter","next","current","getBoundingClientRect","leave","onRest","transition","useMemo","onMouseEnter","onMouseLeave","useEffect","renderMessage","isValidElement","onClose","props","item","pointerEvents"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { useTransition, animated } from \"react-spring\";\nimport ReachAlert from \"@reach/alert\";\nimport Alert from \"./Alert\";\nimport { useTimeout } from \"./useTimeout\";\nimport POSITIONS from \"./Positions\";\n\ninterface MessageCallback {\n  id: string;\n  onClose: () => void;\n}\n\nexport type MessageType = \"default\" | \"success\" | \"error\";\n\nexport type PositionsType = keyof typeof POSITIONS;\n\nconst getStyle = (position: PositionsType) => {\n  let style = {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  } as React.CSSProperties;\n\n  if (position.includes(\"right\")) {\n    style.alignItems = \"flex-end\";\n  } else if (position.includes(\"left\")) {\n    style.alignItems = \"flex-start\";\n  }\n\n  return style;\n};\n\nexport type MessageProp =\n  | React.ReactNode\n  | ((callback: MessageCallback) => React.ReactNode)\n  | string;\n\nexport interface MessageOptions {\n  id: string;\n  duration: number | null;\n  type: MessageType;\n  onRequestRemove: () => void;\n  onRequestClose: () => void;\n  showing: boolean;\n  position: PositionsType;\n}\n\ninterface Props extends MessageOptions {\n  message: MessageProp;\n  zIndex?: number;\n  requestClose?: boolean;\n  position: PositionsType;\n}\n\nexport const Message = ({\n  id,\n  message,\n  position,\n  onRequestRemove,\n  requestClose = false,\n  duration = 30000,\n}: Props) => {\n  const container = React.useRef<HTMLDivElement | null>(null);\n  const [timeout, setTimeout] = React.useState(duration);\n  const [localShow, setLocalShow] = React.useState(true);\n\n  const isFromTop =\n    position === \"top-left\" || position === \"top-right\" || position === \"top\";\n\n  useTimeout(close, timeout);\n\n  const animation = {\n    config: { mass: 1, tension: 185, friction: 26 },\n    from: {\n      opacity: 1,\n      height: 0,\n      transform: `translateY(${isFromTop ? \"-100%\" : 0}) scale(1)`,\n    },\n    enter: () => (next: any) =>\n      next({\n        opacity: 1,\n        height: container.current!.getBoundingClientRect().height,\n        transform: `translateY(0) scale(1)`,\n      }),\n    leave: {\n      opacity: 0,\n      height: 0,\n      transform: `translateY(0 scale(0.9)`,\n    },\n    onRest,\n  } as any;\n\n  const transition = useTransition(localShow, animation);\n  const style = React.useMemo(() => getStyle(position), [position]);\n\n  function onMouseEnter() {\n    setTimeout(null);\n  }\n\n  function onMouseLeave() {\n    setTimeout(duration);\n  }\n\n  function onRest() {\n    if (!localShow) {\n      onRequestRemove();\n    }\n  }\n\n  function close() {\n    setLocalShow(false);\n  }\n\n  React.useEffect(() => {\n    if (requestClose) {\n      setLocalShow(false);\n    }\n  }, [requestClose]);\n\n  function renderMessage() {\n    if (typeof message === \"string\" || React.isValidElement(message)) {\n      return <Alert id={id} title={message} onClose={close} />;\n    }\n\n    if (typeof message === \"function\") {\n      return message({\n        id,\n        onClose: close,\n      });\n    }\n\n    return null;\n  }\n\n  return (\n    <React.Fragment>\n      {transition(\n        (props, item) =>\n          item && (\n            <animated.div\n              className=\"Toaster__message\"\n              onMouseEnter={onMouseEnter}\n              onMouseLeave={onMouseLeave}\n              style={{\n                opacity: props.opacity,\n                height: props.height,\n                ...style,\n              }}\n            >\n              <animated.div\n                style={{\n                  transform: props.transform,\n                  pointerEvents: \"auto\",\n                }}\n                ref={container}\n                className=\"Toaster__message-wrapper\"\n              >\n                <ReachAlert>{renderMessage()}</ReachAlert>\n              </animated.div>\n            </animated.div>\n          )\n      )}\n    </React.Fragment>\n  );\n};\n"],"file":"Message.js"}