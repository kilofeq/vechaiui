{"version":3,"sources":["../../src/radio-group.tsx"],"names":["useId","cx","getValidChildren","__DEV__","React","cloneElement","useImperativeHandle","useRef","useState","RadioGroup","forwardRef","props","ref","onChange","name","color","size","defaultValue","inline","value","valueProp","children","rest","current","isControlled","setValue","_value","rootRef","_onChange","event","target","fallbackName","_name","validChildren","clones","map","child","index","checked","focus","input","querySelector","displayName"],"mappings":"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","sourcesContent":["import { useId } from \"@reach/auto-id\";\nimport { DefaultProps } from \"@vechaiui/theme\";\nimport { cx, getValidChildren, __DEV__ } from \"@vechaiui/utils\";\nimport * as React from \"react\";\nimport { cloneElement, useImperativeHandle, useRef, useState } from \"react\";\n\nimport { RadioProps } from \"./radio\";\n\ninterface IRadioGroupProps extends DefaultProps {\n  /**\n   * The id of the radio group.\n   */\n  id?: string;\n  /**\n   * The name of the radio group. This prop is passed to each checbox\n   */\n  name?: string;\n  /**\n   * The content of the radio group. Must be the `Radio` component\n   */\n  children?: React.ReactNode;\n  /**\n   * The initial value of the radio group\n   */\n  defaultValue?: RadioProps[\"value\"];\n  /**\n   * The value of the radio group\n   */\n  value?: RadioProps[\"value\"];\n  /* Size of all wrapped radio */\n\n  size?: RadioProps[\"size\"];\n  /* Color of all wrapped radio */\n\n  color?: RadioProps[\"color\"];\n  /**\n   * The callback fired when any children Radio is checked or unchecked\n   */\n  onChange?: (\n    event: React.ChangeEvent<HTMLInputElement>,\n    value: RadioProps[\"value\"]\n  ) => void;\n  /**\n   * If `true`, the radio will aligned horizontally.\n   */\n  inline?: boolean;\n}\n\ntype RadioGroupElement = {\n  focus: () => void;\n} | undefined;\nexport type RadioGroupProps = IRadioGroupProps;\n\nexport const RadioGroup = React.forwardRef<RadioGroupElement, RadioGroupProps>(\n  (props, ref) => {\n    const {\n      onChange,\n      name,\n      color,\n      size,\n      defaultValue,\n      inline,\n      value: valueProp,\n      children,\n      ...rest\n    } = props;\n    const { current: isControlled } = useRef(valueProp != null);\n    const [value, setValue] = useState(defaultValue || null);\n    const _value = isControlled ? valueProp : value;\n\n    const rootRef = useRef<HTMLDivElement>(null);\n\n    const _onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (!isControlled) {\n        setValue(event.target.value);\n      }\n\n      if (onChange) {\n        onChange(event, event.target.value);\n      }\n    };\n\n    // If no name is passed, we'll generate a random, unique name\n    const fallbackName = `radio-${useId()}`;\n    const _name = name || fallbackName;\n\n    const validChildren = getValidChildren(children);\n\n    const clones = validChildren.map((child, index) => {\n      return (\n        <div key={index} className={cx(inline ? \"inline-block\" : \"block\")}>\n          {cloneElement(child, {\n            size: child.props.size || size,\n            color: child.props.color || color,\n            name: _name,\n            onChange: _onChange,\n            checked: child.props.value === _value,\n          })}\n        </div>\n      );\n    });\n\n    // Calling focus() on the radiogroup should focus on the selected option or first enabled option\n    useImperativeHandle(\n      ref,\n      () => ({\n        focus: () => {\n          let input: HTMLInputElement | null = rootRef.current?.querySelector(\n            \"input:not(:disabled):checked\"\n          ) || null;\n\n          if (!input) {\n            input = rootRef.current?.querySelector(\"input:not(:disabled)\") || null;\n          }\n\n          if (input) {\n            input.focus();\n          }\n        },\n      }),\n      []\n    );\n\n    return (\n      <div ref={rootRef} role=\"radiogroup\" {...rest}>\n        {clones}\n      </div>\n    );\n  }\n);\n\nif (__DEV__) {\n  RadioGroup.displayName = \"RadioGroup\";\n}"],"file":"radio-group.js"}