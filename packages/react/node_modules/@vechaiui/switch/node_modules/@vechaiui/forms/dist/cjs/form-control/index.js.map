{"version":3,"sources":["../../../src/form-control/index.tsx"],"names":["useFormControl","props","context","useFormControlContext","keys","Object","reduce","acc","prop","FormControlContext","React","createContext","undefined","useContext","FormControl","forwardRef","ref","children","className","required","disabled","invalid","readOnly","idProp","id","rest","classes","labelId","errorId","helpTextId","__DEV__","displayName"],"mappings":";;;;;AAAA;;AAEA;;AACA;;;;;;;;;;;;AA+BO,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,CAC5BC,KAD4B,EAEL;AACvB,MAAMC,OAAO,GAAGC,qBAAqB,EAArC;;AACA,MAAI,CAACD,OAAL,EAAc;AACZ,WAAOD,KAAP;AACD;;AACD,MAAMG,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYF,OAAZ,CAAb;AACA,SAAOE,IAAI,CAACE,MAAL,CAAY,UAACC,GAAD,EAAMC,IAAN,EAAe;AAChC;AACAD,IAAAA,GAAG,CAACC,IAAD,CAAH,GAAYP,KAAK,CAACO,IAAD,CAAjB;;AAEA,QAAIN,OAAJ,EAAa;AACX,UAAID,KAAK,CAACO,IAAD,CAAL,IAAe,IAAnB,EAAyB;AACvBD,QAAAA,GAAG,CAACC,IAAD,CAAH,GAAYN,OAAO,CAACM,IAAD,CAAnB;AACD;AACF;;AAED,WAAOD,GAAP;AACD,GAXM,EAWJ,EAXI,CAAP;AAYD,CApBM;;;AAsBP,IAAME,kBAAkB,gBAAGC,KAAK,CAACC,aAAN,CACzBC,SADyB,CAA3B;;AAIA,IAAMT,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,SAAMO,KAAK,CAACG,UAAN,CAAiBJ,kBAAjB,CAAN;AAAA,CAA9B;;AAEO,IAAMK,WAAW,gBAAGJ,KAAK,CAACK,UAAN,CACzB,UAACd,KAAD,EAAQe,GAAR,EAAgB;AACd,MACEC,QADF,GASIhB,KATJ,CACEgB,QADF;AAAA,MAEEC,SAFF,GASIjB,KATJ,CAEEiB,SAFF;AAAA,MAGEC,QAHF,GASIlB,KATJ,CAGEkB,QAHF;AAAA,MAIEC,QAJF,GASInB,KATJ,CAIEmB,QAJF;AAAA,MAKEC,OALF,GASIpB,KATJ,CAKEoB,OALF;AAAA,MAMEC,QANF,GASIrB,KATJ,CAMEqB,QANF;AAAA,MAOMC,MAPN,GASItB,KATJ,CAOEuB,EAPF;AAAA,MAQKC,IARL,iCASIxB,KATJ;;AAUA,MAAMyB,OAAO,GAAG,eAAG,cAAH,EAAmBR,SAAnB,CAAhB;AAEA,MAAMM,EAAE,GAAGD,MAAM,eAAa,oBAA9B;AAEA,MAAMI,OAAO,GAAMH,EAAN,WAAb;AACA,MAAMI,OAAO,GAAMJ,EAAN,WAAb;AACA,MAAMK,UAAU,GAAML,EAAN,cAAhB;AAEA,MAAMtB,OAAO,GAAG;AACdiB,IAAAA,QAAQ,EAARA,QADc;AAEdC,IAAAA,QAAQ,EAARA,QAFc;AAGdC,IAAAA,OAAO,EAAPA,OAHc;AAIdC,IAAAA,QAAQ,EAARA,QAJc;AAKdE,IAAAA,EAAE,EAAFA,EALc;AAMdG,IAAAA,OAAO,EAAPA,OANc;AAOdC,IAAAA,OAAO,EAAPA,OAPc;AAQdC,IAAAA,UAAU,EAAVA;AARc,GAAhB;AAWA,sBACE,oBAAC,kBAAD,CAAoB,QAApB;AAA6B,IAAA,KAAK,EAAE3B;AAApC,kBACE;AAAK,IAAA,IAAI,EAAC,OAAV;AAAkB,IAAA,GAAG,EAAEc,GAAvB;AAA4B,IAAA,SAAS,EAAEU;AAAvC,KAAoDD,IAApD,GACGR,QADH,CADF,CADF;AAOD,CAtCwB,CAApB;;;AAyCP,IAAIa,cAAJ,EAAa;AACXhB,EAAAA,WAAW,CAACiB,WAAZ,GAA0B,WAA1B;AACD","sourcesContent":["import { useId } from \"@reach/auto-id\";\nimport { DefaultProps } from \"@vechaiui/theme\";\nimport { cx, __DEV__ } from \"@vechaiui/utils\";\nimport * as React from \"react\";\n\ninterface UseFormControlProps {\n  /** If `true`, this prop is passed to its children. */\n  required?: boolean;\n  /** If `true`, this prop is passed to its children. */\n  disabled?: boolean;\n  /** If `true`, this prop is passed to its children. */\n  invalid?: boolean;\n  /** If `true`, this prop is passed to its children. */\n  readOnly?: boolean;\n  /** The `id` to use for the form control. */\n  id?: string;\n}\n\ninterface UseFormControlData extends UseFormControlProps {\n  labelId?: string;\n  errorId?: string;\n  helpTextId?: string;\n}\n\ninterface IFormControlProps extends DefaultProps, UseFormControlProps {\n  children?: React.ReactNode;\n}\n\nexport interface FormControlProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    IFormControlProps {}\n\ninterface FormControlContext extends UseFormControlProps {}\n\nexport const useFormControl = (\n  props: UseFormControlProps\n): UseFormControlData => {\n  const context = useFormControlContext();\n  if (!context) {\n    return props;\n  }\n  const keys = Object.keys(context);\n  return keys.reduce((acc, prop) => {\n    /** Giving precedence to `props` over `context` */\n    acc[prop] = props[prop];\n\n    if (context) {\n      if (props[prop] == null) {\n        acc[prop] = context[prop];\n      }\n    }\n\n    return acc;\n  }, {});\n};\n\nconst FormControlContext = React.createContext<FormControlContext | undefined>(\n  undefined\n);\n\nconst useFormControlContext = () => React.useContext(FormControlContext);\n\nexport const FormControl = React.forwardRef<HTMLDivElement, FormControlProps>(\n  (props, ref) => {\n    const {\n      children,\n      className,\n      required,\n      disabled,\n      invalid,\n      readOnly,\n      id: idProp,\n      ...rest\n    } = props;\n    const classes = cx(\"form-control\", className);\n\n    const id = idProp || `field-${useId()}`;\n\n    const labelId = `${id}-label`;\n    const errorId = `${id}-error`;\n    const helpTextId = `${id}-helptext`;\n\n    const context = {\n      required,\n      disabled,\n      invalid,\n      readOnly,\n      id,\n      labelId,\n      errorId,\n      helpTextId,\n    };\n\n    return (\n      <FormControlContext.Provider value={context}>\n        <div role=\"group\" ref={ref} className={classes} {...rest}>\n          {children}\n        </div>\n      </FormControlContext.Provider>\n    );\n  }\n);\n\nif (__DEV__) {\n  FormControl.displayName = \"FormGroup\";\n}\n"],"file":"index.js"}