{"version":3,"sources":["../../src/image.tsx"],"names":["NativeImage","React","forwardRef","props","ref","htmlWidth","htmlHeight","alt","rest","__DEV__","displayName","Image","fallbackSrc","fallback","src","loading","ignoreFallback","crossOrigin","as","Comp","shouldIgnore","status","shared"],"mappings":";;;;;AACA;;AACA;;AACA;;;;;;;;;;;;;AAmBO,IAAMA,WAAW,gBAAGC,KAAK,CAACC,UAAN,CACzB,UAACC,KAAD,EAA0BC,GAA1B,EAAkD;AAChD,MAAQC,SAAR,GAAgDF,KAAhD,CAAQE,SAAR;AAAA,MAAmBC,UAAnB,GAAgDH,KAAhD,CAAmBG,UAAnB;AAAA,MAA+BC,GAA/B,GAAgDJ,KAAhD,CAA+BI,GAA/B;AAAA,MAAuCC,IAAvC,iCAAgDL,KAAhD;;AACA,sBACE;AACE,IAAA,KAAK,EAAEE,SADT;AAEE,IAAA,MAAM,EAAEC,UAFV;AAGE,IAAA,GAAG,EAAEF,GAHP;AAIE,IAAA,GAAG,EAAEG;AAJP,KAKMC,IALN,EADF;AASD,CAZwB,CAApB;;;AAeP,IAAIC,cAAJ,EAAa;AACXT,EAAAA,WAAW,CAACU,WAAZ,GAA0B,aAA1B;AACD;;AAYM,IAAMC,KAAK,gBAAGV,KAAK,CAACC,UAAN,CAAsC,UAACC,KAAD,EAAQC,GAAR,EAAgB;AACzE,MACEQ,WADF,GASIT,KATJ,CACES,WADF;AAAA,MAEEC,QAFF,GASIV,KATJ,CAEEU,QAFF;AAAA,MAGEC,GAHF,GASIX,KATJ,CAGEW,GAHF;AAAA,MAIEC,OAJF,GASIZ,KATJ,CAIEY,OAJF;AAAA,MAKEC,cALF,GASIb,KATJ,CAKEa,cALF;AAAA,MAMEC,WANF,GASId,KATJ,CAMEc,WANF;AAAA,kBASId,KATJ,CAOEe,EAPF;AAAA,MAOMC,IAPN,0BAOanB,WAPb;AAAA,MAQKQ,IARL,iCASIL,KATJ;AAWA;AACF;AACA;AACA;;;AACE,MAAMiB,YAAY,GAAGL,OAAO,IAAI,IAAX,IAAmBC,cAAxC;AAEA,MAAMK,MAAM,GAAG,qCACVlB,KADU;AAEba,IAAAA,cAAc,EAAEI;AAFH,KAAf;;AAKA,MAAME,MAAM;AACVlB,IAAAA,GAAG,EAAHA;AADU,KAENgB,YAAY,GAAGZ,IAAH,GAAU,iBAAKA,IAAL,EAAW,CAAC,SAAD,EAAY,QAAZ,CAAX,CAFhB,CAAZ;;AAKA,MAAIa,MAAM,KAAK,QAAf,EAAyB;AACvB;AACJ;AACA;AACA;AACI,QAAIR,QAAJ,EAAc,OAAOA,QAAP;AAEd,wBAAO,oBAAC,IAAD;AAAM,MAAA,GAAG,EAAED;AAAX,OAA4BU,MAA5B,EAAP;AACD;;AAED,sBACE,oBAAC,IAAD;AAAM,IAAA,GAAG,EAAER,GAAX;AAAgB,IAAA,WAAW,EAAEG,WAA7B;AAA0C,IAAA,OAAO,EAAEF;AAAnD,KAAgEO,MAAhE,EADF;AAGD,CAzCoB,CAAd;;;AA6CP,IAAIb,cAAJ,EAAa;AACXE,EAAAA,KAAK,CAACD,WAAN,GAAoB,OAApB;AACD","sourcesContent":["import { DefaultProps } from \"@vechaiui/theme\";\nimport { omit, __DEV__ } from \"@vechaiui/utils\";\nimport * as React from \"react\";\nimport { useImage, UseImageProps } from \"./use-image\";\n\ninterface INativeImageProps extends DefaultProps {\n  /**\n   * The native HTML `width` attribute to the passed to the `img`\n   */\n  htmlWidth?: string | number;\n  /**\n   * The native HTML `height` attribute to the passed to the `img`\n   */\n  htmlHeight?: string | number;\n}\n\ninterface NativeImageProps\n  extends React.ImgHTMLAttributes<HTMLImageElement>,\n    INativeImageProps {}\n\nexport type { NativeImageProps };\n\nexport const NativeImage = React.forwardRef(\n  (props: NativeImageProps, ref: React.Ref<any>) => {\n    const { htmlWidth, htmlHeight, alt, ...rest } = props;\n    return (\n      <img\n        width={htmlWidth}\n        height={htmlHeight}\n        ref={ref}\n        alt={alt}\n        {...rest}\n      />\n    );\n  }\n);\n\nif (__DEV__) {\n  NativeImage.displayName = \"NativeImage\";\n}\n\ninterface IImageProps extends Omit<NativeImageProps, \"onError\"> {\n  fallbackSrc?: string;\n  fallback?: React.ReactElement;\n  loading?: \"eager\" | \"lazy\";\n  ignoreFallback?: boolean;\n  as?: React.ElementType;\n}\n\ninterface ImageProps extends UseImageProps, IImageProps {}\n\nexport const Image = React.forwardRef<unknown, ImageProps>((props, ref) => {\n  const {\n    fallbackSrc,\n    fallback,\n    src,\n    loading,\n    ignoreFallback,\n    crossOrigin,\n    as: Comp = NativeImage,\n    ...rest\n  } = props;\n\n  /**\n   * Defer to native `img` tag if `loading` prop is passed\n   * @see https://github.com/chakra-ui/chakra-ui/issues/1027\n   */\n  const shouldIgnore = loading != null || ignoreFallback;\n\n  const status = useImage({\n    ...props,\n    ignoreFallback: shouldIgnore,\n  });\n\n  const shared = {\n    ref,\n    ...(shouldIgnore ? rest : omit(rest, [\"onError\", \"onLoad\"])),\n  };\n\n  if (status !== \"loaded\") {\n    /**\n     * If user passed a custom fallback component,\n     * let's render it here.\n     */\n    if (fallback) return fallback;\n\n    return <Comp src={fallbackSrc} {...shared} />;\n  }\n\n  return (\n    <Comp src={src} crossOrigin={crossOrigin} loading={loading} {...shared} />\n  );\n});\n\nexport type { ImageProps };\n\nif (__DEV__) {\n  Image.displayName = \"Image\";\n}\n"],"file":"image.js"}