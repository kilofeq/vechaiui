{"version":3,"file":"avatar.js","names":["useImage","cx","__DEV__","React","useAvatarClass","useAvatarNameClass","getInitials","name","firstName","lastName","split","charAt","AvatarName","isFullName","className","size","props","avatarNameClasses","displayName","DefaultAvatar","sizes","xs","sm","md","lg","xl","full","baseSizes","Avatar","forwardRef","ref","bordered","src","children","style","onError","rest","classes","status","hasLoaded","sizeKey","_size","fontSize","renderChildren","lineHeight"],"sources":["../../src/avatar.tsx"],"sourcesContent":["import { useImage } from \"@vechaiui/image\";\nimport { DefaultProps } from \"@vechaiui/theme\";\nimport { cx, __DEV__ } from \"@vechaiui/utils\";\nimport * as React from \"react\";\n\nimport { useAvatarClass, useAvatarNameClass } from \"./styles\";\n\ninterface IAvatarProps extends DefaultProps {\n  /* The name of the person in the avatar. */\n  name?: string;\n  /* The border around of the avatar. */\n  bordered?: boolean;\n  /* The badge at the bottom right corner of the avatar. */\n  children?: React.ReactNode;\n  /* The image url of the `Avatar` */\n  src?: string;\n  /* The image set url of the `Avatar` */\n  srcSet?: string;\n  /* Defines loading strategy */\n  loading?: \"eager\" | \"lazy\";\n  /* Function called when image failed to load */\n  onError?: () => void;\n  /* Function to get the initials to display */\n  getInitials?: (name: string) => string;\n  /* */\n  isFullName?: boolean;\n  /* The size of the avatar. */\n  size?: \"2xs\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"2xl\" | \"3xl\" | \"full\";\n}\n\nconst getInitials = (name: string) => {\n  let [firstName, lastName] = name.split(\" \");\n\n  if (firstName && lastName) {\n    return `${firstName.charAt(0)}${lastName.charAt(0)}`;\n  } else {\n    return firstName.charAt(0);\n  }\n};\n\ninterface AvatarNameProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    Pick<\n      IAvatarProps,\n      \"name\" | \"getInitials\" | \"isFullName\" | \"size\" | \"className\"\n    > {}\n\nconst AvatarName = ({\n  name,\n  isFullName,\n  className,\n  size,\n  ...props\n}: AvatarNameProps) => {\n  const avatarNameClasses = useAvatarNameClass({ size });\n  return (\n    <div\n      className={cx(avatarNameClasses, className)}\n      aria-label={name}\n      {...props}\n    >\n      {name ? (isFullName ? name : getInitials(name)) : null}\n    </div>\n  );\n};\n\nif (__DEV__) {\n  AvatarName.displayName = \"AvatarName\";\n}\n\ninterface DefaultAvatarProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  \"aria-label\"?: string;\n}\n\nconst DefaultAvatar = ({ className, ...props }: DefaultAvatarProps) => (\n  <div className={cx(\"w-full h-full\", className)} {...props}>\n    <svg fill=\"#fff\" viewBox=\"0 0 128 128\" role=\"img\">\n      <g>\n        <path d=\"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z\" />\n        <path d=\"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24\" />\n      </g>\n    </svg>\n  </div>\n);\n\nif (__DEV__) {\n  DefaultAvatar.displayName = \"DefaultAvatar\";\n}\n\nconst sizes = {\n  \"2xs\": 4,\n  xs: 5,\n  sm: 6,\n  md: 7,\n  lg: 8,\n  xl: 10,\n  \"2xl\": 12,\n  \"3xl\": 16,\n  full: \"full\",\n};\n\nconst baseSizes = {\n  4: \"1rem\",\n  5: \"1.25rem\",\n  6: \"1.5rem\",\n  7: \"1.75rem\",\n  8: \"2rem\",\n  10: \"2.5rem\",\n  12: \"3rem\",\n  16: \"4rem\",\n};\n\nexport interface AvatarProps\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, \"onError\">,\n    IAvatarProps {\n  iconLabel?: string;\n}\n\nexport const Avatar = React.forwardRef<HTMLDivElement, AvatarProps>(\n  (\n    props,\n    ref\n  ) => {\n    const {\n      size = \"md\",\n      bordered,\n      name,\n      isFullName,\n      src,\n      children,\n      className,\n      style,\n      onError,\n      ...rest\n    } = props;\n\n    const classes = useAvatarClass({\n      size,\n      bordered,\n    });\n\n    const status = useImage({ src, onError });\n    const hasLoaded = status === \"loaded\";\n\n    const sizeKey = sizes[size];\n    const _size = baseSizes[sizeKey];\n    const fontSize = `calc(${_size} / 2.5)`;\n\n    const renderChildren = () => {\n      if (src && hasLoaded) {\n        return (\n          <img\n            className=\"object-cover w-full h-full rounded-full\"\n            src={src}\n            alt={name}\n          />\n        );\n      }\n\n      if (src && !hasLoaded) {\n        if (name) {\n          return <AvatarName size={size} name={name} isFullName={isFullName} />;\n        } else {\n          return <DefaultAvatar aria-label={name} />;\n        }\n      }\n\n      if (!src && name) {\n        return <AvatarName size={size} name={name} isFullName={isFullName} />;\n      }\n\n      return <DefaultAvatar aria-label={name} />;\n    };\n\n    return (\n      <div\n        ref={ref}\n        className={cx(classes, className)}\n        style={{\n          fontSize,\n          lineHeight: _size,\n          ...style,\n        }}\n        {...rest}\n      >\n        {renderChildren()}\n        {children}\n      </div>\n    );\n  }\n);\n\nif (__DEV__) {\n  Avatar.displayName = \"Avatar\";\n}"],"mappings":"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"}