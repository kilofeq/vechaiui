{"version":3,"file":"avatar.js","names":["getInitials","name","split","firstName","lastName","charAt","AvatarName","isFullName","className","size","props","avatarNameClasses","useAvatarNameClass","cx","__DEV__","displayName","DefaultAvatar","sizes","xs","sm","md","lg","xl","full","baseSizes","Avatar","React","forwardRef","ref","bordered","src","children","style","onError","rest","classes","useAvatarClass","status","useImage","hasLoaded","sizeKey","_size","fontSize","renderChildren","lineHeight"],"sources":["../../src/avatar.tsx"],"sourcesContent":["import { useImage } from \"@vechaiui/image\";\nimport { DefaultProps } from \"@vechaiui/theme\";\nimport { cx, __DEV__ } from \"@vechaiui/utils\";\nimport * as React from \"react\";\n\nimport { useAvatarClass, useAvatarNameClass } from \"./styles\";\n\ninterface IAvatarProps extends DefaultProps {\n  /* The name of the person in the avatar. */\n  name?: string;\n  /* The border around of the avatar. */\n  bordered?: boolean;\n  /* The badge at the bottom right corner of the avatar. */\n  children?: React.ReactNode;\n  /* The image url of the `Avatar` */\n  src?: string;\n  /* The image set url of the `Avatar` */\n  srcSet?: string;\n  /* Defines loading strategy */\n  loading?: \"eager\" | \"lazy\";\n  /* Function called when image failed to load */\n  onError?: () => void;\n  /* Function to get the initials to display */\n  getInitials?: (name: string) => string;\n  /* */\n  isFullName?: boolean;\n  /* The size of the avatar. */\n  size?: \"2xs\" | \"xs\" | \"sm\" | \"md\" | \"lg\" | \"xl\" | \"2xl\" | \"3xl\" | \"full\";\n}\n\nconst getInitials = (name: string) => {\n  let [firstName, lastName] = name.split(\" \");\n\n  if (firstName && lastName) {\n    return `${firstName.charAt(0)}${lastName.charAt(0)}`;\n  } else {\n    return firstName.charAt(0);\n  }\n};\n\ninterface AvatarNameProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    Pick<\n      IAvatarProps,\n      \"name\" | \"getInitials\" | \"isFullName\" | \"size\" | \"className\"\n    > {}\n\nconst AvatarName = ({\n  name,\n  isFullName,\n  className,\n  size,\n  ...props\n}: AvatarNameProps) => {\n  const avatarNameClasses = useAvatarNameClass({ size });\n  return (\n    <div\n      className={cx(avatarNameClasses, className)}\n      aria-label={name}\n      {...props}\n    >\n      {name ? (isFullName ? name : getInitials(name)) : null}\n    </div>\n  );\n};\n\nif (__DEV__) {\n  AvatarName.displayName = \"AvatarName\";\n}\n\ninterface DefaultAvatarProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  \"aria-label\"?: string;\n}\n\nconst DefaultAvatar = ({ className, ...props }: DefaultAvatarProps) => (\n  <div className={cx(\"w-full h-full\", className)} {...props}>\n    <svg fill=\"#fff\" viewBox=\"0 0 128 128\" role=\"img\">\n      <g>\n        <path d=\"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z\" />\n        <path d=\"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24\" />\n      </g>\n    </svg>\n  </div>\n);\n\nif (__DEV__) {\n  DefaultAvatar.displayName = \"DefaultAvatar\";\n}\n\nconst sizes = {\n  \"2xs\": 4,\n  xs: 5,\n  sm: 6,\n  md: 7,\n  lg: 8,\n  xl: 10,\n  \"2xl\": 12,\n  \"3xl\": 16,\n  full: \"full\",\n};\n\nconst baseSizes = {\n  4: \"1rem\",\n  5: \"1.25rem\",\n  6: \"1.5rem\",\n  7: \"1.75rem\",\n  8: \"2rem\",\n  10: \"2.5rem\",\n  12: \"3rem\",\n  16: \"4rem\",\n};\n\nexport interface AvatarProps\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, \"onError\">,\n    IAvatarProps {\n  iconLabel?: string;\n}\n\nexport const Avatar = React.forwardRef<HTMLDivElement, AvatarProps>(\n  (\n    props,\n    ref\n  ) => {\n    const {\n      size = \"md\",\n      bordered,\n      name,\n      isFullName,\n      src,\n      children,\n      className,\n      style,\n      onError,\n      ...rest\n    } = props;\n\n    const classes = useAvatarClass({\n      size,\n      bordered,\n    });\n\n    const status = useImage({ src, onError });\n    const hasLoaded = status === \"loaded\";\n\n    const sizeKey = sizes[size];\n    const _size = baseSizes[sizeKey];\n    const fontSize = `calc(${_size} / 2.5)`;\n\n    const renderChildren = () => {\n      if (src && hasLoaded) {\n        return (\n          <img\n            className=\"object-cover w-full h-full rounded-full\"\n            src={src}\n            alt={name}\n          />\n        );\n      }\n\n      if (src && !hasLoaded) {\n        if (name) {\n          return <AvatarName size={size} name={name} isFullName={isFullName} />;\n        } else {\n          return <DefaultAvatar aria-label={name} />;\n        }\n      }\n\n      if (!src && name) {\n        return <AvatarName size={size} name={name} isFullName={isFullName} />;\n      }\n\n      return <DefaultAvatar aria-label={name} />;\n    };\n\n    return (\n      <div\n        ref={ref}\n        className={cx(classes, className)}\n        style={{\n          fontSize,\n          lineHeight: _size,\n          ...style,\n        }}\n        {...rest}\n      >\n        {renderChildren()}\n        {children}\n      </div>\n    );\n  }\n);\n\nif (__DEV__) {\n  Avatar.displayName = \"Avatar\";\n}"],"mappings":"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"}