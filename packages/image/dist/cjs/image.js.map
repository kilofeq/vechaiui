{"version":3,"file":"image.js","names":["NativeImage","React","forwardRef","props","ref","htmlWidth","htmlHeight","alt","rest","__DEV__","displayName","Image","fallbackSrc","fallback","src","loading","ignoreFallback","crossOrigin","as","Comp","shouldIgnore","status","useImage","shared","omit"],"sources":["../../src/image.tsx"],"sourcesContent":["import { DefaultProps } from \"@vechaiui/theme\";\nimport { omit, __DEV__ } from \"@vechaiui/utils\";\nimport * as React from \"react\";\nimport { useImage, UseImageProps } from \"./use-image\";\n\ninterface INativeImageProps extends DefaultProps {\n  /**\n   * The native HTML `width` attribute to the passed to the `img`\n   */\n  htmlWidth?: string | number;\n  /**\n   * The native HTML `height` attribute to the passed to the `img`\n   */\n  htmlHeight?: string | number;\n}\n\ninterface NativeImageProps\n  extends React.ImgHTMLAttributes<HTMLImageElement>,\n    INativeImageProps {}\n\nexport type { NativeImageProps };\n\nexport const NativeImage = React.forwardRef(\n  (props: NativeImageProps, ref: React.Ref<any>) => {\n    const { htmlWidth, htmlHeight, alt, ...rest } = props;\n    return (\n      <img\n        width={htmlWidth}\n        height={htmlHeight}\n        ref={ref}\n        alt={alt}\n        {...rest}\n      />\n    );\n  }\n);\n\nif (__DEV__) {\n  NativeImage.displayName = \"NativeImage\";\n}\n\ninterface IImageProps extends Omit<NativeImageProps, \"onError\"> {\n  fallbackSrc?: string;\n  fallback?: React.ReactElement;\n  loading?: \"eager\" | \"lazy\";\n  ignoreFallback?: boolean;\n  as?: React.ElementType;\n}\n\ninterface ImageProps extends UseImageProps, IImageProps {}\n\nexport const Image = React.forwardRef<unknown, ImageProps>((props, ref) => {\n  const {\n    fallbackSrc,\n    fallback,\n    src,\n    loading,\n    ignoreFallback,\n    crossOrigin,\n    as: Comp = NativeImage,\n    ...rest\n  } = props;\n\n  /**\n   * Defer to native `img` tag if `loading` prop is passed\n   * @see https://github.com/chakra-ui/chakra-ui/issues/1027\n   */\n  const shouldIgnore = loading != null || ignoreFallback;\n\n  const status = useImage({\n    ...props,\n    ignoreFallback: shouldIgnore,\n  });\n\n  const shared = {\n    ref,\n    ...(shouldIgnore ? rest : omit(rest, [\"onError\", \"onLoad\"])),\n  };\n\n  if (status !== \"loaded\") {\n    /**\n     * If user passed a custom fallback component,\n     * let's render it here.\n     */\n    if (fallback) return fallback;\n\n    return <Comp src={fallbackSrc} {...shared} />;\n  }\n\n  return (\n    <Comp src={src} crossOrigin={crossOrigin} loading={loading} {...shared} />\n  );\n});\n\nexport type { ImageProps };\n\nif (__DEV__) {\n  Image.displayName = \"Image\";\n}\n"],"mappings":";;;;AACA;AACA;AACA;AAAsD;EAAA;AAAA;AAAA;AAAA;AAAA;AAmB/C,IAAMA,WAAW,gBAAGC,KAAK,CAACC,UAAU,CACzC,UAACC,KAAuB,EAAEC,GAAmB,EAAK;EAChD,IAAQC,SAAS,GAA+BF,KAAK,CAA7CE,SAAS;IAAEC,UAAU,GAAmBH,KAAK,CAAlCG,UAAU;IAAEC,GAAG,GAAcJ,KAAK,CAAtBI,GAAG;IAAKC,IAAI,iCAAKL,KAAK;EACrD,oBACE;IACE,KAAK,EAAEE,SAAU;IACjB,MAAM,EAAEC,UAAW;IACnB,GAAG,EAAEF,GAAI;IACT,GAAG,EAAEG;EAAI,GACLC,IAAI,EACR;AAEN,CAAC,CACF;AAAC;AAEF,IAAIC,cAAO,EAAE;EACXT,WAAW,CAACU,WAAW,GAAG,aAAa;AACzC;AAYO,IAAMC,KAAK,gBAAGV,KAAK,CAACC,UAAU,CAAsB,UAACC,KAAK,EAAEC,GAAG,EAAK;EACzE,IACEQ,WAAW,GAQTT,KAAK,CARPS,WAAW;IACXC,QAAQ,GAONV,KAAK,CAPPU,QAAQ;IACRC,GAAG,GAMDX,KAAK,CANPW,GAAG;IACHC,OAAO,GAKLZ,KAAK,CALPY,OAAO;IACPC,cAAc,GAIZb,KAAK,CAJPa,cAAc;IACdC,WAAW,GAGTd,KAAK,CAHPc,WAAW;IAAA,YAGTd,KAAK,CAFPe,EAAE;IAAEC,IAAI,0BAAGnB,WAAW;IACnBQ,IAAI,iCACLL,KAAK;;EAET;AACF;AACA;AACA;EACE,IAAMiB,YAAY,GAAGL,OAAO,IAAI,IAAI,IAAIC,cAAc;EAEtD,IAAMK,MAAM,GAAG,IAAAC,kBAAQ,eAClBnB,KAAK;IACRa,cAAc,EAAEI;EAAY,GAC5B;EAEF,IAAMG,MAAM;IACVnB,GAAG,EAAHA;EAAG,GACCgB,YAAY,GAAGZ,IAAI,GAAG,IAAAgB,WAAI,EAAChB,IAAI,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC,CAC5D;EAED,IAAIa,MAAM,KAAK,QAAQ,EAAE;IACvB;AACJ;AACA;AACA;IACI,IAAIR,QAAQ,EAAE,OAAOA,QAAQ;IAE7B,oBAAO,oBAAC,IAAI;MAAC,GAAG,EAAED;IAAY,GAAKW,MAAM,EAAI;EAC/C;EAEA,oBACE,oBAAC,IAAI;IAAC,GAAG,EAAET,GAAI;IAAC,WAAW,EAAEG,WAAY;IAAC,OAAO,EAAEF;EAAQ,GAAKQ,MAAM,EAAI;AAE9E,CAAC,CAAC;AAAC;AAIH,IAAId,cAAO,EAAE;EACXE,KAAK,CAACD,WAAW,GAAG,OAAO;AAC7B"}